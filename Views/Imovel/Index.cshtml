@model IEnumerable<TrabalhoElvis2.Models.Imovel>
@{
    Layout = "_Layout";
    ViewData["Title"] = "Imóveis";
}


<!-- LINK ESTILO -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link rel="stylesheet" href="~/css/imoveis.css" />

<div class="container-page">
    <h2 class="text-primary mb-2"><i class="bi bi-building"></i> Imóveis</h2>
    <p class="subtitle">Gestão de imóveis do condomínio</p>

    <!-- BUSCA eBOTÃO -->
    <div class="actions">
        <input type="text" placeholder="Buscar por código, endereço ou proprietário..." class="search" />
        <button class="btn-novo" data-bs-toggle="modal" data-bs-target="#modalCadastro">
            <i class="bi bi-plus-lg"></i> Novo Imóvel
        </button>
    </div>

    <!--TABELA DE IMÓVEIS -->
    <div class="tabela">
        <table class="table table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>Código</th>
                    <th>Tipo</th>
                    <th>Quartos</th>
                    <th>Banheiros</th>
                    <th>Metragem (m²)</th>
                    <th>Valor do Aluguel</th>
                    <th>Status</th>
                    <th>Proprietário</th>
                    <th>Observações</th>
                    <th class="text-center">Ações</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Codigo</td>
                        <td>@item.Tipo</td>
                        <td>@item.Quartos</td>
                        <td>@item.Banheiros</td>
                        <td>@item.Metragem</td>
                        <td>R$ @item.ValorAluguel.ToString("N2")</td>
                        <td>
                            @if (item.Status == "Ocupado")
                            {
                                <span class="status ocupado">Ocupado</span>
                            }
                            else
                            {
                                <span class="status vago">Vago</span>
                            }
                        </td>
                        <td>@item.Condomino?.NomeCompleto</td>
                        <td>@item.Observacoes</td>
                        <td class="text-center">
                            <a asp-controller="Imovel" asp-action="Editar" asp-route-id="@item.Id"
                               class="btn btn-sm btn-outline-primary me-1" title="Editar">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <form asp-action="Excluir" asp-route-id="@item.Id" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-outline-danger" title="Excluir">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<!--CADASTRAR NOVO IMÓVEL -->
<div class="modal fade" id="modalCadastro" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4">
            <div class="modal-header">
                <h5 class="modal-title">Cadastrar Novo Imóvel</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>

            <form asp-action="Cadastrar" method="post">
                <div class="modal-body">
                    @await Html.PartialAsync("_FormImovel", new TrabalhoElvis2.Models.Imovel())
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Cadastrar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- SCRIPTS BOOTSTRAP  -->
@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
}
